#
# Coverity Travis CI configuration file for PAPPL.
#

language: c
compiler: [gcc]
os: linux
dist: focal
virt: vm

env:
  global:
   # The next declaration is the encrypted COVERITY_SCAN_TOKEN, created
   #   via the "travis encrypt" command using the project repo's public key
   - secure: "jSkDteeENEWPkRilRMboi9Rg+6+JYeCgbDko+JA0VIPeZ94UKMyCwUpOn5vwTe1jSuoTJTnm3Qp9FNQ5QHsPzILOq/HW6hgt1ktOVZDhkHiwTGfyKyC8M2NTUR+E65Aip86HHs7IuFdPMvNg/hXfO4KI6jS1d1g2N+QQns/4yeVTcufsS/+KNH0RaMpMXycMuqOLMczAnO6AGISkPd0rZVKquNyP/3/3CYnYEhV0Ygyrzfxl82thOILO/eF1wolJzh3Ajd/U8G7IRLRiS0zDtPZTjGqdnQ+ElHEvUskZfNjbN1nxFOWOfrJYKMN5qI44USuUPeiFzWj0liPiKIXZM93UBedRJ4Wil5xe7wRx+ep+9g6eLOo8mSz9MbsVOUY9f8BGa+TbFa7eX3pKXRDjy2SCVtjMk88TQTy72RTLxGjsG6M43p/eVPi3bxHAO5cANuMNA6IXYisy2SYZnPf7GET+0LQCUsKrQqkNWMmx+thnhJ6YtLiRsnIaPAG0ajlGyy0HK2bbrhWlwP4DNus+1nmTecuC15See/NpXb4zwp527aj2RdvXaWIlicnx+lNylK8bKd8Uc4gmkbfHP9HZc6P1mfpj30UJExghUOUDw66AX9idtSUHVLa47Zy8a8ke3HUMd2YZuz6AQtNh/SzczDFJDuGeAYAxBQ7kotHaw3M="

before_install:
  - echo -n | openssl s_client -connect https://scan.coverity.com:443 | sed -ne '/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p' | sudo tee -a /etc/ssl/certs/ca-

addons:
  apt:
    packages: [avahi-daemon, cppcheck, libavahi-client-dev, libcups2-dev, libcupsimage2-dev, libgnutls28-dev, libjpeg-dev, libpng-dev, libusb-1.0-0-dev, zlib1g-dev]
  coverity_scan:
    project:
      name: "michaelrsweet/pappl"
      description: "Printer Application Framework"
      version: "1.1b1"
    notification_email: michael.r.sweet@gmail.com
    build_command_prepend: "./configure --enable-debug"
    build_command: "make"
    branch_pattern: coverity_scan
